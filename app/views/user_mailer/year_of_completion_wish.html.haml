!!!
%html{:xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %meta{:content => "text/html; charset=utf-8", "http-equiv" => "Content-Type"}/
    %title
    :css
      @media only screen and (max-width:480px){body,table,td,p,a,li,blockquote{-webkit-text-size-adjust:none !important}body{width:100% !important;min-width:100% !important}td[id=bodyCell]{padding:10px !important}table.kmMobileHide{display:none !important}table[class=kmTextContentContainer]{width:100% !important}table[class=kmBoxedTextContentContainer]{width:100% !important}td[class=kmImageContent]{padding-left:0 !important;padding-right:0 !important}img[class=kmImage]{width:100% !important}table[class=kmSplitContentLeftContentContainer],table[class=kmSplitContentRightContentContainer],table[class=kmColumnContainer],td[class=kmVerticalButtonBarContentOuter] table[class=kmButtonBarContent],td[class=kmVerticalButtonCollectionContentOuter] table[class=kmButtonCollectionContent],table[class=kmVerticalButton],table[class=kmVerticalButtonContent]{width:100% !important}td[class=kmButtonCollectionInner]{padding-left:9px !important;padding-right:9px !important;padding-top:9px !important;padding-bottom:0 !important;background-color:transparent !important}td[class=kmVerticalButtonIconContent],td[class=kmVerticalButtonTextContent],td[class=kmVerticalButtonContentOuter]{padding-left:0 !important;padding-right:0 !important;padding-bottom:9px !important}table[class=kmSplitContentLeftContentContainer] td[class=kmTextContent],table[class=kmSplitContentRightContentContainer] td[class=kmTextContent],table[class=kmColumnContainer] td[class=kmTextContent],table[class=kmSplitContentLeftContentContainer] td[class=kmImageContent],table[class=kmSplitContentRightContentContainer] td[class=kmImageContent]{padding-top:9px !important}td[class="rowContainer kmFloatLeft"],td[class="rowContainer kmFloatLeft firstColumn"],td[class="rowContainer kmFloatLeft lastColumn"]{float:left;clear:both;width:100% !important}table[id=templateContainer],table[class=templateRow]{max-width:600px !important;width:100% !important}h1{font-size:24px !important;line-height:130% !important}h2{font-size:20px !important;line-height:130% !important}h3{font-size:18px !important;line-height:130% !important}h4{font-size:16px !important;line-height:130% !important}td[class=kmTextContent]{font-size:14px !important;line-height:130% !important}td[class=kmTextBlockInner] td[class=kmTextContent]{padding-right:18px !important;padding-left:18px !important}table[class="kmTableBlock kmTableMobile"] td[class=kmTableBlockInner]{padding-left:9px !important;padding-right:9px !important}table[class="kmTableBlock kmTableMobile"] td[class=kmTableBlockInner] [class=kmTextContent]{font-size:14px !important;line-height:130% !important;padding-left:4px !important;padding-right:4px !important}}
  %body{:style => "margin:0;padding:0;background-color:#FFF0FD;background-image:url(https://klaviyo.s3.amazonaws.com/company%2FeVAXg2%2Fimages%2FWebsite-Background-Tile.png);background-repeat:repeat;background-position:left top"}
    %center
      %table#bodyTable{:align => "center", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:0;background-image:url(https://klaviyo.s3.amazonaws.com/company%2FeVAXg2%2Fimages%2FWebsite-Background-Tile.png);background-repeat:repeat;background-position:left top;height:100%;margin:0;width:100%", :width => "100%"}
        %tbody
          %tr
            %td#bodyCell{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding-top:50px;padding-left:20px;padding-bottom:20px;padding-right:20px;border-top:0;height:100%;margin:0;width:100%", :valign => "top"}
              %table#templateContainer{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;border:1px solid #AAA;background-color:#FFF;border-radius:0", :width => "600"}
                %tbody
                  %tr
                    %td#templateContainerInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:0"}
                      %table{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                        %tr
                          %td{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                            %table.templateRow{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                              %tbody
                                %tr
                                  %td.rowContainer.kmFloatLeft.firstColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "25%"}
                                    %table.kmImageBlock{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                      %tbody.kmImageBlockOuter
                                        %tr
                                          %td.kmImageBlockInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:9px;", :valign => "top"}
                                            %table.kmImageContentContainer{:align => "left", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                              %tbody
                                                %tr
                                                  %td.kmImageContent{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:0;padding-top:0px;padding-bottom:0;padding-left:9px;padding-right:9px;", :valign => "top"}
                                                    %img.kmImage{:align => "left", :alt => "", :src => "https://d3k81ch9hvuctc.cloudfront.net/company%2FeVAXg2%2Fimages%2FJOSHSoftware_LogoStack_Color_org-686d650436a0c8757d0a4ec777da3401.png", :style => "border:0;height:auto;line-height:100%;outline:none;text-decoration:none;padding-bottom:0;display:inline;vertical-align:bottom;margin-right:0;max-width:250px;", :width => "114"}/
                                  %td.rowContainer.kmFloatLeft.lastColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "75%"}
                                    %table.kmTextBlock{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                      %tbody.kmTextBlockOuter
                                        %tr
                                          %td.kmTextBlockInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;", :valign => "top"}
                                            %table.kmTextContentContainer{:align => "left", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                              %tbody
                                                %tr
                                                  %td.kmTextContent{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;color:#505050;font-family:Helvetica, Arial;font-size:14px;line-height:150%;text-align:left;padding-top:9px;padding-bottom:9px;padding-left:18px;padding-right:18px;", :valign => "top"}
                                                    %h1{:style => "color:#222;display:block;font-family:Helvetica, Arial;font-size:26px;font-style:normal;font-weight:bold;line-height:110%;letter-spacing:normal;margin:0;margin-bottom:9px;text-align:left;text-align: right;"}
                                                      %span{:style => "color:#696969;"}
                                                        %span{:style => "font-size: 24px;"} Congratulations!
                        %tr
                          %td{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                            %table.templateRow{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                              %tbody
                                %tr
                                  %td.rowContainer.kmFloatLeft.firstColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "50%"}
                                  %td.rowContainer.kmFloatLeft.lastColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "50%"}
                        - @user_hash.each do |k, v|
                          - year = "year"
                          - if k > 1
                            - year += "s"
                          %tr
                            %td{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                              %table.templateRow{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                %tbody
                                  %tr
                                    %td.rowContainer.kmFloatLeft.firstColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "33%"}
                                      %table.kmTextBlock{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                        %tbody.kmTextBlockOuter
                                          %tr
                                            %td.kmTextBlockInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding-top:9px;padding-right:5px;padding-left:9px;", :valign => "top"}
                                              %table.kmTextContentContainer{:align => "left", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                                %tbody
                                                  %tr
                                                    %td.kmTextContent{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;color:#505050;font-family:Helvetica, Arial;font-size:14px;line-height:150%;text-align:left;border-style:dotted;padding-bottom:9px;border-color:#7AD258;text-align:center;padding-right:18px;padding-left:18px;padding-top:9px;border-width:5px;", :valign => "top"}
                                                      %div{:style => "text-align: center;"}
                                                      &nbsp;
                                                      %div{:style => "text-align: center;"}
                                                      &nbsp;
                                                      %div{:style => "text-align: center;"}
                                                      &nbsp;
                                                      %div{:style => "text-align: center;"}
                                                        %span{:style => "font-size:102px;"} #{k}
                                                      %div{:style => "text-align: center;"}
                                                      &nbsp;
                                                      %div{:style => "text-align: center;"}
                                                      &nbsp;
                                                      %div{:style => "text-align: center;"} #{year}  Anniversary
                                    %td.rowContainer.kmFloatLeft.lastColumn{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top", :width => "67%"}
                                      %table.kmTextBlock{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                        %tbody.kmTextBlockOuter
                                          %tr
                                            %td.kmTextBlockInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding-top:8px;padding-right:12px;", :valign => "top"}
                                              %table.kmTextContentContainer{:align => "left", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                                %tbody
                                                  %tr
                                                    %td.kmTextContent{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;color:#505050;font-family:Helvetica, Arial;font-size:14px;line-height:150%;text-align:left;border-style:dashed;padding-bottom:11px;border-color:#C8F4C0;padding-right:18px;padding-left:18px;padding-top:7px;border-width:0px;", :valign => "top"}
                                                      %p{:style => "margin:0;padding-bottom:1em"}
                                                      &nbsp;
                                                      %p{:style => "margin:0;padding-bottom:1em"}
                                                        %em Congratulations #{v.join(', ')} for completing #{k} #{year} at Josh!
                        %tr
                          %td{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                            %table.templateRow{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                              %tbody
                                %tr
                                  %td.rowContainer.kmFloatLeft{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                                    %table.kmImageBlock{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                      %tbody.kmImageBlockOuter
                                        %tr
                                          %td.kmImageBlockInner{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:9px;", :valign => "top"}
                                            %table.kmImageContentContainer{:align => "left", :border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                                              %tbody
                                                %tr
                                                  %td.kmImageContent{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0;padding:0;padding-top:0px;padding-bottom:0;padding-left:9px;padding-right:9px;", :valign => "top"}
                                                    %img.kmImage{:align => "left", :alt => "", :src => "https://klaviyo.s3.amazonaws.com/company%2FeVAXg2%2Fimages%2Fhappy-anniversary_9a792e.jpg", :style => "border:0;height:auto;line-height:100%;outline:none;text-decoration:none;padding-bottom:0;display:inline;vertical-align:bottom;margin-right:0;max-width:800px;", :width => "564"}/
                        %tr
                          %td{:align => "center", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
                            %table.templateRow{:border => "0", :cellpadding => "0", :cellspacing => "0", :style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :width => "100%"}
                              %tbody
                                %tr
                                  %td.rowContainer.kmFloatLeft{:style => "border-collapse:collapse;mso-table-lspace:0;mso-table-rspace:0", :valign => "top"}
